class X
def a
  begin
    b
      rescue TypeError
r = self.z
  end
      [ r, @e ] end

    def b
  begin
1 * "b".length
  ensure @a = nil;class << a;def self.b;6;end;end;e = self.zz
  end
end
 def zz
    end
    def z
end
  end
X.new.a
